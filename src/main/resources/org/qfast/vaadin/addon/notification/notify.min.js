(function(a,b){if(typeof define==="function"&&define.amd){define("notify",[],function(){return b(a,document)})}else{if(typeof exports==="object"){module.exports=b(a,document)}else{a.Notify=b(a,document)}}}(window,function(a,e){function c(d){return typeof d==="function"}function b(g,d){if(typeof g!=="string"){throw new Error("Notify(): first arg (title) must be a string.")}this.title=g;this.options={icon:"",body:"",tag:"",notifyShow:null,notifyClose:null,notifyClick:null,notifyError:null,permissionGranted:null,permissionDenied:null,timeout:null};this.permission=null;if(!b.isSupported){return}if(typeof d==="object"){for(var f in d){if(d.hasOwnProperty(f)){this.options[f]=d[f]}}if(c(this.options.notifyShow)){this.onShowCallback=this.options.notifyShow}if(c(this.options.notifyClose)){this.onCloseCallback=this.options.notifyClose}if(c(this.options.notifyClick)){this.onClickCallback=this.options.notifyClick}if(c(this.options.notifyError)){this.onErrorCallback=this.options.notifyError}}}b.isSupported="Notification" in a;b.needsPermission=!(b.isSupported&&Notification.permission==="granted");b.requestPermission=function(f,d){if(!b.isSupported){return}a.Notification.requestPermission(function(g){switch(g){case"granted":b.needsPermission=false;if(c(f)){f()}break;case"denied":if(c(d)){d()}break}})};b.prototype.show=function(){if(!b.isSupported){return}this.myNotify=new Notification(this.title,{body:this.options.body,tag:this.options.tag,icon:this.options.icon});if(this.options.timeout&&!isNaN(this.options.timeout)){setTimeout(this.close.bind(this),this.options.timeout*1000)}this.myNotify.addEventListener("show",this,false);this.myNotify.addEventListener("error",this,false);this.myNotify.addEventListener("close",this,false);this.myNotify.addEventListener("click",this,false)};b.prototype.onShowNotification=function(d){if(this.onShowCallback){this.onShowCallback(d)}};b.prototype.onCloseNotification=function(d){if(this.onCloseCallback){this.onCloseCallback(d)}this.destroy()};b.prototype.onClickNotification=function(d){if(this.onClickCallback){this.onClickCallback(d)}};b.prototype.onErrorNotification=function(d){if(this.onErrorCallback){this.onErrorCallback(d)}this.destroy()};b.prototype.destroy=function(){this.myNotify.removeEventListener("show",this,false);this.myNotify.removeEventListener("error",this,false);this.myNotify.removeEventListener("close",this,false);this.myNotify.removeEventListener("click",this,false)};b.prototype.close=function(){this.myNotify.close()};b.prototype.handleEvent=function(d){switch(d.type){case"show":this.onShowNotification(d);break;case"close":this.onCloseNotification(d);break;case"click":this.onClickNotification(d);break;case"error":this.onErrorNotification(d);break}};return b}));